---
title: "Informe #1"
author: "Julio Francisco Barahona Martínez & Jorge Estuardo Suchite Martínez   "
date: "February 21, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
if (!require("RSQLite"))    {install.packages("RSQLite");   library("RSQLite")}
if (!require("DBI"))    {install.packages("DBI");   library("DBI")}
if (!require("knitr"))    {install.packages("knitr");   library("knitr")}
if (!require("tables"))    {install.packages("tables");   library("tables")}
if (!require("kableExtra"))    {install.packages("kableExtra");   library("kableExtra")}
```
## Enfoque

En este documento se pretende encontrar,  mediante queries SQL, la aerolinea con mejor desempeño. El desempeño se . La [base de datos](https://www.transtats.bts.gov/DatabaseInfo.asp?DB_ID=120) fue proveida por el catedratico Bidkar Pojoy. 

### Analisis preliminar 

La base de datos completa es muy grande para ser procesada en su totalidad, es por esto que se redujeron los campos (columnas). Debio a esto se tiene que hacer un analisis rápido de las tablas y tuplas en la nueva base de datos acotada. 

```{r tablas, warning=FALSE}
#Nombre de base de datos
filename <- "ontime.db"

#Modulo para poder utilizar RSQLite
sqlite <- dbDriver("SQLite")

db <- dbConnect (sqlite,dbname= filename)
tablas <- as.data.frame(dbListTables(db))
kable(tablas ,col.names = "Tablas en Base de datos") 
```

### Query #6
¿Cuál es la probabilidad de que un vuelo de cierta aerolínea llegue retrasado? <br /> Para esta pregunta se tiene que hacer una serie de pasos:
1. Agrupar las aerolineas que tuvieron algun retraso al salir.  <br />
2. De las aerolineas obtenidas observar el numero de vuelos retrasados versus el numero de vuelos realizados en total.  <br />
3. Presentar el porcentaje de retraso en un nueva columna asociada con el nombre de la aereolinea.  <br />
```{r query6, message=FALSE, warning=FALSE}
sql <- paste0("
  SELECT DISTINCT DOT_ID_Reporting_Airline
  FROM ontime
  WHERE (depdelay > 10)
  GROUP BY DOT_ID_Reporting_Airline
  ")

res <- dbSendQuery(db, sql)
as.data.frame(dbFetch(res))
```

### Query 

#### Mierda de suchite
```{r testingshit , message=FALSE, warning=FALSE}
sql <- paste0("
  SELECT count (*)
  FROM airline_id")
res <- dbSendQuery(db, sql)
kable(as.data.frame(dbFetch(res)))
```


```{r dbDisconnect, include=FALSE}
#Fucion para no saturar la base de datos ni el kernel
dbDisconnect(db)
```

